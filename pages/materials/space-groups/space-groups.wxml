<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">ğŸ’ ç©ºé—´ç¾¤æ•°æ®åº“</view>
    <view class="header-desc">230ä¸ªå›½é™…ç©ºé—´ç¾¤å®Œæ•´æŸ¥è¯¢</view>
    <view class="header-stats">
      å…± {{totalCount}} ä¸ªç©ºé—´ç¾¤ Â· 7ä¸ªæ™¶ç³»
    </view>
  </view>

  <!-- æœç´¢æ¡† -->
  <search-input
    value="{{searchValue}}"
    placeholder="{{searchPlaceholder}}"
    enableHistory="{{false}}"
    bind:input="onSearchInput"
  />

  <!-- æ™¶ç³»ç­›é€‰ -->
  <quick-filter
    title="æŒ‰æ™¶ç³»ç­›é€‰"
    filters="{{crystalSystems}}"
    selected="{{selectedSystem}}"
    mode="single"
    showCount="{{true}}"
    showClear="{{true}}"
    bindchange="onFilterSelect"
    bind:clear="onFilterClear"
  />

  <!-- ç»“æœç»Ÿè®¡ -->
  <view class="result-stats">
    æ‰¾åˆ° {{displayList.length}} ä¸ªç©ºé—´ç¾¤
  </view>

  <!-- ç©ºé—´ç¾¤åˆ—è¡¨ -->
  <view class="space-group-list">
    <data-card
      wx:for="{{displayList}}"
      wx:key="number"
      title="No. {{item.number}} Â· {{item.symbol}}"
      subtitle="{{item.system}} Â· {{item.pointGroup}}"
      badge="{{item.centrosymmetric ? 'æœ‰å¿ƒ' : 'æ— å¿ƒ'}}"
      badgeType="{{item.centrosymmetric ? 'success' : 'info'}}"
      showBadge="{{true}}"
      indicator="primary"
      data-number="{{item.number}}"
      bind:tap="selectSpaceGroup"
    >
      <view slot="content" class="card-content">
        <view class="info-row">
          <text class="info-label">Laueç±»ï¼š</text>
          <text class="info-value">{{item.laueClass}}</text>
        </view>
        <view class="info-row" wx:if="{{item.schoenflies}}">
          <text class="info-label">Schoenfliesï¼š</text>
          <text class="info-value">{{item.schoenflies}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ä¸€èˆ¬ä½ç½®æ•°ï¼š</text>
          <text class="info-value">{{item.generalPositions}}</text>
        </view>
      </view>
    </data-card>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{displayList.length === 0}}" class="empty-state">
    <text class="empty-icon">ğŸ”</text>
    <text class="empty-text">æœªæ‰¾åˆ°åŒ¹é…çš„ç©ºé—´ç¾¤</text>
    <text class="empty-hint">å°è¯•æœç´¢ç¼–å·(1-230)æˆ–ç¬¦å·</text>
  </view>

  <!-- è¯¦æƒ…å¼¹çª— -->
  <view wx:if="{{selectedGroup}}" class="detail-modal" catchtap="closeDetail">
    <view class="detail-content" catchtap="tap">
      <view class="detail-header">
        <view class="detail-title">
          ç©ºé—´ç¾¤ No. {{selectedGroup.number}}
        </view>
        <view class="detail-symbol">{{selectedGroup.symbol}}</view>
      </view>

      <view class="detail-body">
        <!-- åŸºæœ¬ä¿¡æ¯ -->
        <view class="detail-section">
          <view class="section-title">ğŸ“Š åŸºæœ¬ä¿¡æ¯</view>
          <view class="detail-item">
            <text class="detail-label">Hermann-Mauguinç¬¦å·</text>
            <text class="detail-value">{{selectedGroup.symbol}}</text>
          </view>
          <view class="detail-item" wx:if="{{selectedGroup.schoenflies}}">
            <text class="detail-label">Schoenfliesç¬¦å·</text>
            <text class="detail-value">{{selectedGroup.schoenflies}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">æ™¶ç³»</text>
            <text class="detail-value">{{selectedGroup.system}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">Laueç±»</text>
            <text class="detail-value">{{selectedGroup.laueClass}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">ç‚¹ç¾¤</text>
            <text class="detail-value">{{selectedGroup.pointGroup}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">å¯¹ç§°ä¸­å¿ƒ</text>
            <text class="detail-value">{{selectedGroup.centrosymmetric ? 'æœ‰' : 'æ— '}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">ä¸€èˆ¬ä½ç½®æ•°</text>
            <text class="detail-value">{{selectedGroup.generalPositions}}</text>
          </view>
        </view>

        <!-- æ¶ˆå…‰è§„åˆ™ -->
        <view wx:if="{{selectedGroup.extinction && selectedGroup.extinction.length > 0}}" class="detail-section">
          <view class="section-title">ğŸš« æ¶ˆå…‰è§„åˆ™</view>
          <view wx:for="{{selectedGroup.extinction}}" wx:key="*this" class="extinction-item">
            â€¢ {{item}}
          </view>
        </view>

        <!-- å¯¹ç§°å…ƒç´  -->
        <view wx:if="{{selectedGroup.symmetryElements && selectedGroup.symmetryElements.length > 0}}" class="detail-section">
          <view class="section-title">ğŸ”„ å¯¹ç§°å…ƒç´ </view>
          <view wx:for="{{selectedGroup.symmetryElements}}" wx:key="*this" class="symmetry-item">
            â€¢ {{item}}
          </view>
        </view>

        <!-- ç­‰æ•ˆä½ç½® -->
        <view wx:if="{{selectedGroup.equivalentPositions && selectedGroup.equivalentPositions.length > 0 && selectedGroup.equivalentPositions.length <= 8}}" class="detail-section">
          <view class="section-title">ğŸ“ ç­‰æ•ˆä½ç½®</view>
          <view wx:for="{{selectedGroup.equivalentPositions}}" wx:key="*this" class="position-item">
            {{index + 1}}. {{item}}
          </view>
        </view>

        <!-- å…¸å‹å®ä¾‹ -->
        <view wx:if="{{selectedGroup.examples && selectedGroup.examples.length > 0}}" class="detail-section">
          <view class="section-title">ğŸ“š å…¸å‹å®ä¾‹</view>
          <view wx:for="{{selectedGroup.examples}}" wx:key="*this" class="example-item">
            â€¢ {{item}}
          </view>
        </view>

        <!-- è¯´æ˜ -->
        <view wx:if="{{selectedGroup.notes}}" class="detail-section">
          <view class="section-title">ğŸ’¡ è¯´æ˜</view>
          <text class="notes-text">{{selectedGroup.notes}}</text>
        </view>
      </view>

      <view class="detail-footer">
        <button class="action-button secondary" bindtap="closeDetail">å…³é—­</button>
        <button class="action-button primary" bindtap="copyInfo">å¤åˆ¶ä¿¡æ¯</button>
      </view>
    </view>
  </view>
</view>
