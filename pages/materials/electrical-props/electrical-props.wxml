<view class="container">
  <!-- å·¥å…·é€‰æ‹© Tab -->
  <view class="tool-tabs">
    <view 
      wx:for="{{tools}}" 
      wx:key="id"
      class="tab-item {{currentTool === item.id ? 'active' : ''}}"
      data-tool="{{item.id}}"
      bindtap="switchTool"
    >
      <text class="tab-icon">{{item.icon}}</text>
      <text class="tab-name">{{item.name}}</text>
    </view>
  </view>

  <!-- å››æ¢é’ˆæ³• -->
  <view wx:if="{{currentTool === 'four-probe'}}" class="tool-content">
    <view class="tool-intro">
      <text class="intro-title">ğŸ“ å››æ¢é’ˆæ³•</text>
      <text class="intro-desc">æµ‹é‡è–„ç‰‡æ ·å“çš„ç”µå¯¼ç‡</text>
      <text class="intro-formula">Ïƒ = ln(2)/(Ï€Â·t) Ã— I/V</text>
    </view>

    <view class="input-section">
      <calculator-input
        label="ç”µå‹"
        value="{{fourProbeV}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š1.5"
        unit="V"
        icon="âš¡"
        enableHistory="{{true}}"
        historyTool="electrical"
        historyField="voltage"
        touchArea="large"
        bind:input="handleFourProbeVInput"
        bindchange="handleVoltageChange"
      />

      <calculator-input
        label="ç”µæµ"
        value="{{fourProbeI}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š10"
        unit="mA"
        icon="ğŸ”Œ"
        bind:input="handleFourProbeIInput"
      />

      <view class="picker-field">
        <text class="picker-label">ç”µæµå•ä½</text>
        <picker mode="selector" range="{{currentUnits}}" value="{{currentUnitIndex}}" bindchange="handleCurrentUnitChange">
          <view class="picker-value">{{currentUnits[currentUnitIndex]}}</view>
        </picker>
      </view>

      <calculator-input
        label="æ ·å“åšåº¦"
        value="{{fourProbeT}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š0.5"
        unit="cm"
        icon="ğŸ“"
        bind:input="handleFourProbeTInput"
      />

      <view class="picker-field">
        <text class="picker-label">åšåº¦å•ä½</text>
        <picker mode="selector" range="{{thicknessUnits}}" value="{{thicknessUnitIndex}}" bindchange="handleThicknessUnitChange">
          <view class="picker-value">{{thicknessUnits[thicknessUnitIndex]}}</view>
        </picker>
      </view>
    </view>

    <view class="button-group">
      <button class="calc-button primary" bindtap="calculateFourProbe">è®¡ç®—</button>
      <button class="calc-button" bindtap="clearResult">æ¸…ç©º</button>
    </view>

    <result-card wx:if="{{fourProbeResultText}}" title="è®¡ç®—ç»“æœ">
      <view class="result-text">{{fourProbeResultText}}</view>
    </result-card>
  </view>

  <!-- å—ä½“æ ·å“ -->
  <view wx:if="{{currentTool === 'bulk'}}" class="tool-content">
    <view class="tool-intro">
      <text class="intro-title">ğŸ”² å—ä½“æ ·å“ï¼ˆä¸¤æ¢é’ˆæ³•ï¼‰</text>
      <text class="intro-desc">è§„åˆ™å½¢çŠ¶æ ·å“çš„ç”µå¯¼ç‡</text>
      <text class="intro-formula">Ïƒ = L/(RÂ·A)</text>
    </view>

    <view class="input-section">
      <calculator-input
        label="ç”µé˜»"
        value="{{bulkR}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š1000"
        unit="Î©"
        icon="âš¡"
        bind:input="handleBulkRInput"
      />

      <calculator-input
        label="æ ·å“é•¿åº¦"
        value="{{bulkL}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š2"
        unit="cm"
        icon="ğŸ“"
        bind:input="handleBulkLInput"
      />

      <calculator-input
        label="æ¨ªæˆªé¢ç§¯"
        value="{{bulkA}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š0.5"
        unit="cmÂ²"
        icon="â–¢"
        bind:input="handleBulkAInput"
      />
    </view>

    <view class="button-group">
      <button class="calc-button primary" bindtap="calculateBulk">è®¡ç®—</button>
      <button class="calc-button" bindtap="clearResult">æ¸…ç©º</button>
    </view>

    <result-card wx:if="{{bulkResultText}}" title="è®¡ç®—ç»“æœ">
      <view class="result-text">{{bulkResultText}}</view>
    </result-card>
  </view>

  <!-- è–„è†œæ ·å“ -->
  <view wx:if="{{currentTool === 'film'}}" class="tool-content">
    <view class="tool-intro">
      <text class="intro-title">ğŸ“„ è–„è†œæ ·å“ï¼ˆæ–¹å—ç”µé˜»æ³•ï¼‰</text>
      <text class="intro-desc">é€æ˜å¯¼ç”µè–„è†œç­‰ææ–™</text>
      <text class="intro-formula">Ïƒ = 1/(RsÃ—t)</text>
    </view>

    <view class="input-section">
      <calculator-input
        label="æ–¹å—ç”µé˜»"
        value="{{filmRs}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š50"
        unit="Î©/sq"
        icon="ğŸ“"
        bind:input="handleFilmRsInput"
      />

      <calculator-input
        label="è–„è†œåšåº¦"
        value="{{filmT}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š300"
        unit="nm"
        icon="ğŸ“"
        hint="çº³ç±³çº§åšåº¦"
        bind:input="handleFilmTInput"
      />
    </view>

    <view class="button-group">
      <button class="calc-button primary" bindtap="calculateFilm">è®¡ç®—</button>
      <button class="calc-button" bindtap="clearResult">æ¸…ç©º</button>
    </view>

    <result-card wx:if="{{filmResultText}}" title="è®¡ç®—ç»“æœ">
      <view class="result-text">{{filmResultText}}</view>
    </result-card>
  </view>

  <!-- ä»‹ç”µå¸¸æ•° -->
  <view wx:if="{{currentTool === 'dielectric'}}" class="tool-content">
    <view class="tool-intro">
      <text class="intro-title">âš¡ ä»‹ç”µå¸¸æ•°è®¡ç®—</text>
      <text class="intro-desc">ä»ç”µå®¹æµ‹é‡è®¡ç®—ç›¸å¯¹ä»‹ç”µå¸¸æ•°</text>
      <text class="intro-formula">Îµr = CÂ·d/(Îµ0Â·A)</text>
    </view>

    <view class="input-section">
      <calculator-input
        label="ç”µå®¹"
        value="{{dielectricC}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š100"
        unit="pF"
        icon="ğŸ”Œ"
        bind:input="handleDielectricCInput"
      />

      <view class="picker-field">
        <text class="picker-label">ç”µå®¹å•ä½</text>
        <picker mode="selector" range="{{capacitanceUnits}}" value="{{capacitanceUnitIndex}}" bindchange="handleCapacitanceUnitChange">
          <view class="picker-value">{{capacitanceUnits[capacitanceUnitIndex]}}</view>
        </picker>
      </view>

      <calculator-input
        label="ç”µæé¢ç§¯"
        value="{{dielectricA}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š1"
        unit="cmÂ²"
        icon="â–¢"
        bind:input="handleDielectricAInput"
      />

      <calculator-input
        label="ä»‹è´¨åšåº¦"
        value="{{dielectricD}}"
        type="digit"
        placeholder="ä¾‹å¦‚ï¼š0.1"
        unit="mm"
        icon="ğŸ“"
        bind:input="handleDielectricDInput"
      />
    </view>

    <view class="button-group">
      <button class="calc-button primary" bindtap="calculateDielectric">è®¡ç®—</button>
      <button class="calc-button" bindtap="clearResult">æ¸…ç©º</button>
    </view>

    <result-card wx:if="{{dielectricResultText}}" title="è®¡ç®—ç»“æœ">
      <view class="result-text">{{dielectricResultText}}</view>
    </result-card>
  </view>

  <!-- å¯¼å‡ºæŒ‰é’® -->
  <view wx:if="{{fourProbeResultText || bulkResultText || filmResultText || dielectricResultText}}" class="export-button" bindtap="exportResult">
    <text>ğŸ“¤ å¯¼å‡ºç»“æœ</text>
  </view>
</view>

