<view class="home-container">
  <!-- 顶部搜索栏 -->
  <view class="search-section">
    <view class="search-bar" bindtap="navigateToSearch">
      <text class="search-icon">🔍</text>
      <text class="search-placeholder">搜索工具、化学品、材料...</text>
    </view>
  </view>

  <!-- 快捷搜索标签 -->
  <view class="quick-tags" wx:if="{{!isSearching}}">
    <view class="quick-tag" wx:for="{{quickSearchTags}}" wx:key="*this" 
          data-tag="{{item}}" bindtap="onQuickSearchTag">
      {{item}}
    </view>
  </view>

  <!-- 最近使用 -->
  <view class="section recent-section" wx:if="{{recentTools.length > 0 && !isSearching}}">
    <view class="section-header">
      <text class="section-title">⏱️ 最近使用</text>
    </view>
    <scroll-view class="recent-scroll" scroll-x>
      <view class="recent-tools">
        <view class="recent-tool" wx:for="{{recentTools}}" wx:key="id"
              data-path="{{item.path}}" data-id="{{item.id}}" bindtap="navigateToTool">
          <text class="tool-icon">{{item.icon}}</text>
          <text class="tool-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 搜索结果 -->
  <view class="search-results" wx:if="{{isSearching}}">
    <view class="search-header">
      <text class="result-count">找到 {{filteredTools.length}} 个工具</text>
      <text class="clear-search" bindtap="clearSearch">清除</text>
    </view>
    
    <view class="tool-grid">
      <view class="tool-card-wrapper" wx:for="{{filteredTools}}" wx:key="id"
            data-path="{{item.path}}" data-id="{{item.id}}" bindtap="navigateToTool">
        <view class="tool-card">
          <text class="card-icon">{{item.icon}}</text>
          <view class="card-content">
            <text class="card-title">{{item.name}}</text>
            <text class="card-desc">{{item.description}}</text>
            <text class="card-category">{{item.category}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="empty-result" wx:if="{{filteredTools.length === 0}}">
      <text class="empty-icon">🔍</text>
      <text class="empty-text">未找到相关工具</text>
    </view>
  </view>

  <!-- v8.0.0 按科研标准分类的工具导航 -->
  <view class="categories-container" wx:if="{{!isSearching && showTools}}">
    <view class="category-section" wx:for="{{categories}}" wx:key="id">
      <view class="category-header" style="border-left-color: {{item.color}}">
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-title">{{item.name}}</text>
        <text class="tool-count">{{toolsByCategory[item.id].length}}个</text>
      </view>
      
      <view class="tool-grid">
        <view class="tool-card-wrapper" 
              wx:for="{{toolsByCategory[item.id]}}" 
              wx:key="id"
              wx:for-item="tool"
              data-path="{{tool.path}}" 
              data-id="{{tool.id}}" 
              bindtap="navigateToTool">
          <view class="tool-card">
            <text class="card-icon">{{tool.icon}}</text>
            <view class="card-content">
              <text class="card-title">{{tool.name}}</text>
              <text class="card-desc">{{tool.description}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部提示 -->
  <view class="footer-tip" wx:if="{{!isSearching}}">
    <text class="tip-badge">72种化学品 · 172种半导体 · 200+实验常数</text>
  </view>
</view>
