<view class="electrochem-page">
  <view class="page-header">
    <text class="header-icon">âš¡</text>
    <view class="header-content">
      <view class="header-title">ç”µåŒ–å­¦è®¡ç®—</view>
      <view class="header-desc">ç”µæç”µä½æ¢ç®—ã€Nernstæ–¹ç¨‹è®¡ç®—</view>
    </view>
  </view>

  <view class="section-card">
    <view class="tool-tabs">
      <view wx:for="{{tools}}" wx:key="id" class="tool-tab {{currentTool === item.id ? 'active' : ''}}" data-tool="{{item.id}}" bindtap="switchTool">
        <text class="tab-icon">{{item.icon}}</text>
        <text class="tab-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- ç”µæç”µä½æ¢ç®— -->
  <view wx:if="{{currentTool === 'convert'}}" class="tool-content">
    <view class="section-card">
      <view class="section-title">ğŸ”„ ç”µæç”µä½æ¢ç®—</view>
      <view class="section-description">ä¸åŒå‚æ¯”ç”µæä¹‹é—´çš„ç”µä½æ¢ç®—</view>
      
      <view class="form-section">
        <view class="form-row">
          <view class="form-label">æºå‚æ¯”ç”µæ</view>
          <picker mode="selector" range="{{references}}" value="{{fromRefIndex}}" bindchange="handleFromRefChange">
            <view class="picker-display">{{references[fromRefIndex]}}<text class="picker-arrow">â–¼</text></view>
          </picker>
        </view>
        
        <calculator-input label="ç”µä½å€¼ (V)" type="digit" value="{{potential}}" placeholder="ä¾‹å¦‚ï¼š0.5" bindinput="handlePotentialInput" />
        
        <view class="form-row">
          <view class="form-label">ç›®æ ‡å‚æ¯”ç”µæ</view>
          <picker mode="selector" range="{{references}}" value="{{toRefIndex}}" bindchange="handleToRefChange">
            <view class="picker-display">{{references[toRefIndex]}}<text class="picker-arrow">â–¼</text></view>
          </picker>
        </view>
        
        <view class="action-buttons">
          <button class="btn-primary" bindtap="convertPotential">è½¬æ¢</button>
          <button class="btn-secondary" bindtap="resetConvert">æ¸…ç©º</button>
        </view>
      </view>
      
      <result-card wx:if="{{convertResult}}" title="è½¬æ¢ç»“æœ" result="{{convertResultText}}" show-copy="{{true}}" show-export="{{true}}" show-history="{{true}}" history-type="electrochem" history-input="{{convertHistoryInput}}" unit="{{convertUnit}}" formula="{{convertFormula}}" data-source="ç”µåŒ–å­¦å•ä½æ¢ç®—" show-metadata="{{true}}" metadata-expanded="{{false}}">
        <view class="result-value">{{convertResult}}</view>
      </result-card>
    </view>
  </view>

  <!-- Nernstæ–¹ç¨‹ -->
  <view wx:if="{{currentTool === 'nernst'}}" class="tool-content">
    <view class="section-card">
      <view class="section-title">âš›ï¸ Nernstæ–¹ç¨‹è®¡ç®—</view>
      <view class="section-description">E = EÂ° - (RT/nF)lnQ</view>
      
      <view class="form-section">
        <calculator-input label="æ ‡å‡†ç”µæç”µä½ EÂ° (V)" type="digit" value="{{e0}}" placeholder="ä¾‹å¦‚ï¼š0.34" bindinput="handleE0Input" />
        <calculator-input label="æ¸©åº¦ T (Â°C)" type="digit" value="{{temperature}}" placeholder="25" hint="é»˜è®¤25Â°C" bindinput="handleTemperatureInput" />
        <calculator-input label="ç”µå­è½¬ç§»æ•° n" type="digit" value="{{electronNum}}" placeholder="ä¾‹å¦‚ï¼š2" bindinput="handleElectronNumInput" />
        <calculator-input label="ååº”å•† Q" type="digit" value="{{reactionQ}}" placeholder="ä¾‹å¦‚ï¼š0.1" hint="Q=[ç”Ÿæˆç‰©]/[ååº”ç‰©]" bindinput="handleQInput" />
        
        <view class="action-buttons">
          <button class="btn-primary" bindtap="calculateNernst">è®¡ç®—</button>
          <button class="btn-secondary" bindtap="resetNernst">æ¸…ç©º</button>
        </view>
      </view>
      
      <result-card wx:if="{{nernstResult}}" title="è®¡ç®—ç»“æœ" result="{{nernstResultText}}" hint="{{nernstHint}}" show-copy="{{true}}" show-export="{{true}}" show-history="{{true}}" history-type="electrochem" history-input="{{nernstHistoryInput}}" unit="V" precision="å°æ•°ç‚¹å4ä½" formula="E = EÂ° - (RT/nF)ln(Q)" warning="{{nernstWarning}}" data-source="Nernstæ–¹ç¨‹" show-metadata="{{true}}" metadata-expanded="{{false}}">
        <view class="result-value">{{nernstResult}}</view>
      </result-card>
      
      <view class="info-card">
        <view class="info-header"><text class="info-icon">ğŸ“–</text><text>Nernstæ–¹ç¨‹</text></view>
        <view class="info-content">
          <view class="formula-item">
            <text class="formula-label">æ ‡å‡†å½¢å¼ï¼š</text>
            <text class="formula">E = EÂ° - (RT/nF)lnQ</text>
          </view>
          <view class="formula-item">
            <text class="formula-label">å¸¸ç”¨å½¢å¼ï¼ˆ25Â°Cï¼‰ï¼š</text>
            <text class="formula">E = EÂ° - (0.05916/n)logâ‚â‚€Q</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="tip-card">
    <view class="tip-header"><text class="tip-icon">ğŸ’¡</text><text>ä½¿ç”¨æç¤º</text></view>
    <view class="tip-content">
      <text>â€¢ NHE (SHE)ï¼šæ ‡å‡†æ°¢ç”µæï¼ŒE = 0 V</text>
      <text>â€¢ SCEï¼šé¥±å’Œç”˜æ±ç”µæï¼ŒE = +0.241 V vs NHE</text>
      <text>â€¢ Ag/AgClï¼šé“¶/æ°¯åŒ–é“¶ç”µæï¼Œçº¦+0.197 V vs NHE</text>
      <text>â€¢ ç”µä½æ¢ç®—ï¼šE(NHE) = E(å‚æ¯”) + Î”E(å‚æ¯”â†’NHE)</text>
    </view>
  </view>
</view>

