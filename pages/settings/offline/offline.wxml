<view class="container">
  <!-- ç½‘ç»œçŠ¶æ€æç¤º -->
  <view class="network-status {{isOnline ? 'online' : 'offline'}}">
    <text class="status-icon">{{isOnline ? 'ğŸ“¡' : 'ğŸ“µ'}}</text>
    <text class="status-text">{{isOnline ? 'ç½‘ç»œå·²è¿æ¥' : 'ç¦»çº¿æ¨¡å¼'}}</text>
  </view>

  <!-- ç¦»çº¿æ¨¡å¼å¼€å…³ -->
  <view class="setting-card">
    <view class="setting-item">
      <view class="item-left">
        <text class="item-icon">ğŸ”Œ</text>
        <view class="item-info">
          <text class="item-title">å¯ç”¨ç¦»çº¿æ¨¡å¼</text>
          <text class="item-desc">æ— ç½‘ç»œæ—¶ä½¿ç”¨å·²ä¸‹è½½çš„å·¥å…·</text>
        </view>
      </view>
      <switch 
        checked="{{offlineEnabled}}" 
        bindchange="toggleOfflineMode"
        color="#1f3c88"
      />
    </view>
  </view>

  <!-- å­˜å‚¨ç»Ÿè®¡ -->
  <view class="storage-card">
    <view class="card-title">
      <text class="title-icon">ğŸ’¾</text>
      <text class="title-text">å­˜å‚¨ç©ºé—´</text>
    </view>
    
    <view class="storage-info">
      <view class="info-item">
        <text class="info-value">{{stats.installedCount}}/{{stats.totalTools}}</text>
        <text class="info-label">å·²å®‰è£…å·¥å…·</text>
      </view>
      <view class="info-item">
        <text class="info-value">{{stats.percentage}}%</text>
        <text class="info-label">ç©ºé—´ä½¿ç”¨</text>
      </view>
    </view>

    <view class="storage-bar">
      <view class="bar-fill" style="width: {{stats.percentage}}%"></view>
    </view>
    
    <view class="storage-text">
      å·²ç”¨ {{stats.storageUsed}}KB / å…± {{stats.maxStorage}}KB
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="quick-actions">
    <button class="action-btn primary" bindtap="installEssential" disabled="{{installing}}">
      <text class="btn-icon">âš¡</text>
      <text class="btn-text">ä¸€é”®å®‰è£…å¿…éœ€å·¥å…·</text>
    </button>
    
    <button class="action-btn info" bindtap="checkUpdate">
      <text class="btn-icon">ğŸ”„</text>
      <text class="btn-text">æ£€æŸ¥æ›´æ–°</text>
    </button>
    
    <button class="action-btn danger" bindtap="clearAllData">
      <text class="btn-icon">ğŸ—‘ï¸</text>
      <text class="btn-text">æ¸…ç©ºæ‰€æœ‰æ•°æ®</text>
    </button>
  </view>

  <!-- å®‰è£…è¿›åº¦ -->
  <view class="install-progress" wx:if="{{installing}}">
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{installProgress}}%"></view>
    </view>
    <text class="progress-text">å®‰è£…ä¸­... {{installProgress}}%</text>
  </view>

  <!-- å·¥å…·åˆ—è¡¨ -->
  <view class="tools-section" wx:for="{{categories}}" wx:key="id">
    <view class="section-header">
      <text class="section-icon">{{item.icon}}</text>
      <text class="section-title">{{item.name}}</text>
    </view>

    <view class="tool-list">
      <view 
        class="tool-item" 
        wx:for="{{tools}}" 
        wx:for-item="tool"
        wx:key="id"
        wx:if="{{tool.category === item.id}}"
      >
        <view class="tool-left">
          <text class="tool-name">{{tool.name}}</text>
          <text class="tool-size">{{tool.size}}KB</text>
          <text class="tool-badge" wx:if="{{tool.essential}}">å¿…éœ€</text>
        </view>

        <view class="tool-right">
          <view class="tool-status" wx:if="{{tool.installed}}">
            <text class="status-icon">âœ…</text>
            <text class="status-text">å·²å®‰è£…</text>
          </view>

          <button 
            wx:if="{{!tool.installed}}"
            class="tool-btn install-btn" 
            data-id="{{tool.id}}"
            bindtap="installTool"
            size="mini"
          >
            ä¸‹è½½
          </button>

          <button 
            wx:if="{{tool.installed}}"
            class="tool-btn uninstall-btn" 
            data-id="{{tool.id}}"
            data-name="{{tool.name}}"
            bindtap="uninstallTool"
            size="mini"
          >
            å¸è½½
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- è¯´æ˜æ–‡å­— -->
  <view class="tips-card">
    <view class="tip-title">ğŸ’¡ ä½¿ç”¨è¯´æ˜</view>
    <view class="tip-item">â€¢ ä¸‹è½½å·¥å…·åå¯åœ¨æ— ç½‘ç»œæ—¶ä½¿ç”¨</view>
    <view class="tip-item">â€¢ å¿…éœ€å·¥å…·åŒ…å«æœ€å¸¸ç”¨çš„è®¡ç®—åŠŸèƒ½</view>
    <view class="tip-item">â€¢ å®šæœŸæ£€æŸ¥æ›´æ–°ä»¥è·å–æœ€æ–°æ•°æ®</view>
    <view class="tip-item">â€¢ ç¦»çº¿æ•°æ®æ€»å®¹é‡é™åˆ¶ä¸º10MB</view>
  </view>
</view>

