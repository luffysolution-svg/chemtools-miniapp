<view class="container">
  <!-- å­¦æœ¯é£æ ¼æœç´¢ -->
  <view class="search-section">
    <search-input
      value="{{searchQuery}}"
      placeholder="æœç´¢æº¶å‰‚åç§°ã€CASå·æˆ–åˆ†å­å¼"
      enableHistory="{{true}}"
      historyKey="solvent-selector"
      hotSearches="{{hotSolvents}}"
      showHot="{{!searchQuery}}"
      bindinput="handleSearchInput"
      bindsearch="handleSearch"
      bindclear="clearSearch"
    />
    
    <!-- å­¦æœ¯é£æ ¼ç­›é€‰ -->
    <quick-filter
      title="ææ€§èŒƒå›´"
      filters="{{polarityFilters}}"
      selected="{{selectedPolarity}}"
      mode="single"
      bindchange="handlePolarityChange"
    />
  </view>

  <!-- æº¶å‰‚åˆ—è¡¨ -->
  <view class="solvent-list">
    <view 
      wx:for="{{filteredSolvents}}" 
      wx:key="cas"
      class="solvent-card"
      data-index="{{index}}"
      bindtap="viewDetail"
    >
      <view class="solvent-header">
        <view class="solvent-names">
          <text class="solvent-name-cn">{{item.name}}</text>
          <text class="solvent-name-en">{{item.nameEn}}</text>
        </view>
        <view class="safety-badge {{item.safety}}">
          {{item.safety === 'low' ? 'âœ“' : item.safety === 'medium' ? 'âš ' : 'âš âš '}}
        </view>
      </view>

      <view class="solvent-props">
        <view class="prop-item">
          <text class="prop-label">ææ€§</text>
          <text class="prop-value">{{item.polarity}}</text>
        </view>
        <view class="prop-item">
          <text class="prop-label">æ²¸ç‚¹</text>
          <text class="prop-value">{{item.boilingPoint}}Â°C</text>
        </view>
        <view class="prop-item">
          <text class="prop-label">å¯†åº¦</text>
          <text class="prop-value">{{item.density}}</text>
        </view>
      </view>

      <text class="solvent-formula">{{item.formula}}</text>
    </view>
  </view>

  <!-- è¯¦æƒ…å¼¹çª— -->
  <view wx:if="{{showDetail}}" class="detail-modal" bindtap="closeDetail">
    <view class="detail-content" catchtap="doNothing">
      <view class="detail-header">
        <text class="detail-title">{{selectedSolvent.name}}</text>
        <text class="detail-subtitle">{{selectedSolvent.nameEn}} ({{selectedSolvent.formula}})</text>
      </view>

      <view class="detail-body">
        <view class="detail-section">
          <text class="section-title">ğŸ“‹ ç‰©ç†æ€§è´¨</text>
          <view class="prop-grid">
            <view class="prop-row">
              <text class="prop-name">ææ€§æŒ‡æ•°ï¼š</text>
              <text class="prop-val">{{selectedSolvent.polarity}}</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">æ²¸ç‚¹ï¼š</text>
              <text class="prop-val">{{selectedSolvent.boilingPoint}} Â°C</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">ç†”ç‚¹ï¼š</text>
              <text class="prop-val">{{selectedSolvent.meltingPoint}} Â°C</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">å¯†åº¦ï¼š</text>
              <text class="prop-val">{{selectedSolvent.density}} g/mL</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">ç²˜åº¦ï¼š</text>
              <text class="prop-val">{{selectedSolvent.viscosity}} cP</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">ä»‹ç”µå¸¸æ•°ï¼š</text>
              <text class="prop-val">{{selectedSolvent.dielectricConstant}}</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">æŠ˜å°„ç‡ï¼š</text>
              <text class="prop-val">{{selectedSolvent.refractiveIndex}}</text>
            </view>
            <view class="prop-row">
              <text class="prop-name">UVæˆªæ­¢ï¼š</text>
              <text class="prop-val">{{selectedSolvent.uvCutoff}} nm</text>
            </view>
          </view>
        </view>

        <view class="detail-section">
          <text class="section-title">ğŸ”¬ åº”ç”¨é¢†åŸŸ</text>
          <view class="app-tags">
            <text wx:for="{{selectedSolvent.applications}}" wx:key="*this" class="app-tag">{{item}}</text>
          </view>
        </view>

        <view class="detail-section">
          <text class="section-title">âš ï¸ å®‰å…¨æç¤º</text>
          <text class="safety-level">å±é™©ç­‰çº§ï¼š{{selectedSolvent.safety === 'low' ? 'ä½å±' : selectedSolvent.safety === 'medium' ? 'ä¸­å±' : 'é«˜å±'}}</text>
          <text class="notes">{{selectedSolvent.notes}}</text>
        </view>
      </view>

      <view class="detail-buttons">
        <button class="detail-button export" bindtap="exportSolvent">å¯¼å‡º</button>
        <button class="detail-button close" bindtap="closeDetail">å…³é—­</button>
      </view>
    </view>
  </view>
</view>

