# ç»„ä»¶ä½¿ç”¨æ–‡æ¡£

**ç‰ˆæœ¬**: v3.2.0  
**æœ€åæ›´æ–°**: 2025-10-11

æœ¬æ–‡æ¡£åŒ…å«æ‰€æœ‰è‡ªå®šä¹‰ç»„ä»¶çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ã€‚

---

## ğŸ“‘ ç›®å½•

1. [result-card - ç»“æœå¡ç‰‡ç»„ä»¶](#result-card)
2. [calculator-input - è®¡ç®—å™¨è¾“å…¥ç»„ä»¶](#calculator-input)
3. [tool-card - å·¥å…·å¡ç‰‡ç»„ä»¶](#tool-card)
4. [skeleton - éª¨æ¶å±ç»„ä»¶](#skeleton)

---

## result-card

ç»“æœå±•ç¤ºå¡ç‰‡ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºè®¡ç®—ç»“æœå’Œå…ƒæ•°æ®ã€‚

### åŸºç¡€å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| title | String | 'ç»“æœ' | å¡ç‰‡æ ‡é¢˜ |
| type | String | 'default' | å¡ç‰‡ç±»å‹ï¼šdefault/success/warning/error |
| result | String | '' | ç»“æœæ–‡æœ¬ï¼ˆç”¨äºå¤åˆ¶å’Œå¯¼å‡ºï¼‰ |
| hint | String | '' | æç¤ºæ–‡æœ¬ |
| showCopy | Boolean | true | æ˜¯å¦æ˜¾ç¤ºå¤åˆ¶æŒ‰é’® |
| showExport | Boolean | false | æ˜¯å¦æ˜¾ç¤ºå¯¼å‡ºæŒ‰é’® |
| showHistory | Boolean | false | æ˜¯å¦æ˜¾ç¤ºä¿å­˜æŒ‰é’® |

### å…ƒæ•°æ®å±æ€§ï¼ˆv2.1æ–°å¢ï¼‰

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| unit | String | '' | å•ä½ |
| precision | String | '' | ç²¾åº¦è¯´æ˜ |
| formula | String | '' | è®¡ç®—å…¬å¼ |
| conditions | Array/String | null | è®¡ç®—æ¡ä»¶ |
| warning | String | '' | è­¦å‘Šä¿¡æ¯ |
| dataSource | String | '' | æ•°æ®æ¥æº |
| showMetadata | Boolean | true | æ˜¯å¦æ˜¾ç¤ºå…ƒæ•°æ®åŒºåŸŸ |
| metadataExpanded | Boolean | false | æ˜¯å¦é»˜è®¤å±•å¼€å…ƒæ•°æ® |

### å†å²è®°å½•å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| historyType | String | '' | å†å²è®°å½•ç±»å‹ |
| historyInput | String | '' | å†å²è®°å½•è¾“å…¥æè¿° |

### äº‹ä»¶

| äº‹ä»¶å | è¯´æ˜ | å›è°ƒå‚æ•° |
|--------|------|----------|
| copy | å¤åˆ¶å®Œæˆæ—¶è§¦å‘ | { text } |
| export | å¯¼å‡ºå®Œæˆæ—¶è§¦å‘ | { text, fileName } |
| historysaved | ä¿å­˜åˆ°å†å²å®Œæˆæ—¶è§¦å‘ | { type, title, input, result, metadata } |

### åŸºç¡€ä½¿ç”¨

```xml
<result-card 
  title="è®¡ç®—ç»“æœ"
  result="d = 2.456 Ã…"
  type="success"
>
  <view>æ™¶é¢é—´è·ï¼š2.456 Ã…</view>
</result-card>
```

### å®Œæ•´ä½¿ç”¨ï¼ˆåŒ…å«å…ƒæ•°æ®ï¼‰

```xml
<result-card 
  title="XRDè®¡ç®—ç»“æœ"
  type="success"
  result="d = 2.456 Ã…"
  unit="Ã… (åŸƒç±³)"
  precision="ç²¾åº¦çº¦ 0.001 Ã…"
  formula="d = Î» / (2sinÎ¸)"
  conditions="{{['æ³¢é•¿ Î» = 1.5406 Ã… (Cu KÎ±)', '2Î¸ = 36.5Â°', 'æ¸©åº¦ = 25Â°C']}}"
  dataSource="å¸ƒæ‹‰æ ¼æ–¹ç¨‹ï¼ŒåŸºäºCODATA 2018"
  showCopy="{{true}}"
  showExport="{{true}}"
  showHistory="{{true}}"
  historyType="xrd"
  historyInput="Î¸ = 18.25Â°, Î» = 1.5406 Ã…"
  showMetadata="{{true}}"
  metadataExpanded="{{false}}"
>
  <view class="result-value">
    <text class="label">æ™¶é¢é—´è·ï¼š</text>
    <text class="value">2.456 Ã…</text>
  </view>
</result-card>
```

### å¸¦è­¦å‘Šä¿¡æ¯

```xml
<result-card 
  title="ç”µåŒ–å­¦è®¡ç®—"
  type="warning"
  result="E vs NHE = 0.234 V"
  unit="V (ä¼ç‰¹)"
  precision="ç²¾åº¦çº¦ 0.001 V"
  warning="æ¸©åº¦è¶…å‡ºå¸¸è§„èŒƒå›´(25Â±5Â°C)ï¼Œç»“æœå¯èƒ½å­˜åœ¨åå·®"
  formula="E(NHE) = E(ref) + EÂ°(ref vs NHE) - 0.059Ã—pH"
  conditions="{{['å‚æ¯”ç”µæ: Ag/AgCl', 'pH = 7.0', 'æ¸©åº¦ = 35Â°C']}}"
  dataSource="èƒ½æ–¯ç‰¹æ–¹ç¨‹ï¼Œå‚è€ƒIUPACæ¨èå€¼"
  showMetadata="{{true}}"
  metadataExpanded="{{true}}"
>
  <view>E vs NHE = 0.234 V</view>
</result-card>
```

### åœ¨JSä¸­åŠ¨æ€è®¾ç½®

```javascript
Page({
  data: {
    resultData: {
      type: 'success',
      result: '',
      unit: '',
      precision: '',
      formula: '',
      conditions: [],
      warning: '',
      dataSource: ''
    }
  },
  
  calculate() {
    const result = xrdUtil.dFromTheta2(this.data.theta, this.data.lambda);
    
    if (result.error) {
      this.setData({
        'resultData.type': 'error',
        'resultData.result': result.error,
        'resultData.warning': result.error
      });
    } else {
      this.setData({
        'resultData.type': 'success',
        'resultData.result': `d = ${result.d.toFixed(4)} ${result.unit}`,
        'resultData.unit': result.unit,
        'resultData.precision': result.precision,
        'resultData.formula': result.formula,
        'resultData.conditions': result.conditions,
        'resultData.warning': result.warning || '',
        'resultData.dataSource': 'CODATA 2018'
      });
    }
  }
});
```

---

## calculator-input

è®¡ç®—å™¨é£æ ¼çš„æ•°å­—è¾“å…¥ç»„ä»¶ã€‚

### å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| label | String | '' | è¾“å…¥æ¡†æ ‡ç­¾ |
| value | String/Number | '' | è¾“å…¥å€¼ |
| placeholder | String | 'è¯·è¾“å…¥' | å ä½ç¬¦ |
| unit | String | '' | å•ä½æ˜¾ç¤º |
| type | String | 'number' | è¾“å…¥ç±»å‹ï¼štext/number/digit |
| disabled | Boolean | false | æ˜¯å¦ç¦ç”¨ |

### äº‹ä»¶

| äº‹ä»¶å | è¯´æ˜ | å›è°ƒå‚æ•° |
|--------|------|----------|
| input | è¾“å…¥æ—¶è§¦å‘ | { value } |
| change | å€¼æ”¹å˜æ—¶è§¦å‘ | { value } |

### ä½¿ç”¨ç¤ºä¾‹

```xml
<calculator-input
  label="2Î¸è§’åº¦"
  value="{{theta}}"
  placeholder="è¯·è¾“å…¥è§’åº¦"
  unit="Â°"
  type="digit"
  bind:input="handleThetaInput"
/>
```

```javascript
handleThetaInput(e) {
  this.setData({ theta: e.detail.value });
}
```

---

## tool-card

å·¥å…·å¡ç‰‡ç»„ä»¶ï¼Œç”¨äºé¦–é¡µå·¥å…·åˆ—è¡¨ã€‚

### å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| icon | String | '' | å›¾æ ‡ï¼ˆEmojiæˆ–å›¾ç‰‡è·¯å¾„ï¼‰ |
| title | String | '' | å·¥å…·æ ‡é¢˜ |
| description | String | '' | å·¥å…·æè¿° |
| path | String | '' | è·³è½¬è·¯å¾„ |
| size | String | 'normal' | å°ºå¯¸ï¼šnormal/large/small |

### äº‹ä»¶

| äº‹ä»¶å | è¯´æ˜ | å›è°ƒå‚æ•° |
|--------|------|----------|
| click | ç‚¹å‡»æ—¶è§¦å‘ | { path } |

### ä½¿ç”¨ç¤ºä¾‹

```xml
<tool-card
  icon="ğŸ“"
  title="XRDè®¡ç®—"
  description="å¸ƒæ‹‰æ ¼æ–¹ç¨‹ã€då€¼è®¡ç®—"
  path="/pages/advanced/xrd/xrd"
  size="normal"
  bind:click="handleToolClick"
/>
```

```javascript
handleToolClick(e) {
  wx.navigateTo({
    url: e.detail.path
  });
}
```

---

## skeleton

éª¨æ¶å±åŠ è½½ç»„ä»¶ï¼Œç”¨äºæ”¹å–„åŠ è½½ä½“éªŒã€‚

### å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| type | String | 'card' | éª¨æ¶ç±»å‹ï¼šcard/list/tool/table |
| rows | Number | 3 | æ˜¾ç¤ºçš„è¡Œæ•° |
| loading | Boolean | true | æ˜¯å¦æ˜¾ç¤ºéª¨æ¶å± |

### éª¨æ¶ç±»å‹è¯´æ˜

#### card - å¡ç‰‡éª¨æ¶
- é€‚ç”¨äºï¼šè¯¦æƒ…é¡µã€å¡ç‰‡åˆ—è¡¨
- ç»“æ„ï¼šå¤´åƒ + 3è¡Œæ–‡å­—

#### list - åˆ—è¡¨éª¨æ¶
- é€‚ç”¨äºï¼šå†å²è®°å½•ã€æ™®é€šåˆ—è¡¨
- ç»“æ„ï¼šåœ†å½¢å›¾æ ‡ + 2è¡Œæ–‡å­—

#### tool - å·¥å…·å¡ç‰‡éª¨æ¶
- é€‚ç”¨äºï¼šé¦–é¡µå·¥å…·ç½‘æ ¼
- ç»“æ„ï¼šæ–¹å½¢å›¾æ ‡ + 2è¡Œæ–‡å­—

#### table - è¡¨æ ¼éª¨æ¶
- é€‚ç”¨äºï¼šæ•°æ®è¡¨æ ¼
- ç»“æ„ï¼š3åˆ—æ•°æ®è¡Œ

### ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€ä½¿ç”¨

```xml
<skeleton type="tool" rows="6" loading="{{loading}}"></skeleton>
```

#### é…åˆå®é™…å†…å®¹

```xml
<view wx:if="{{loading}}">
  <skeleton type="card" rows="5"></skeleton>
</view>
<view wx:else class="content">
  <!-- å®é™…å†…å®¹ -->
</view>
```

#### åœ¨åŠå¯¼ä½“é¡µé¢ä¸­çš„åº”ç”¨

```xml
<view class="material-grid">
  <view wx:if="{{loading}}">
    <skeleton type="tool" rows="6"></skeleton>
  </view>
  <view wx:else class="material-list">
    <view wx:for="{{materials}}" wx:key="index">
      <!-- ææ–™å¡ç‰‡ -->
    </view>
  </view>
</view>
```

```javascript
Page({
  data: {
    loading: true,
    materials: []
  },
  
  onLoad() {
    this.loadMaterials();
  },
  
  async loadMaterials() {
    this.setData({ loading: true });
    
    // æ¨¡æ‹ŸåŠ è½½
    setTimeout(() => {
      this.setData({
        loading: false,
        materials: [...] // å®é™…æ•°æ®
      });
    }, 1500);
  }
});
```

### åŠ¨ç”»æ•ˆæœ

éª¨æ¶å±å†…ç½®æ¸å˜æ‰«å…‰åŠ¨ç”»ï¼š
- åŠ¨ç”»æ—¶é•¿ï¼š1.5ç§’
- å¾ªç¯æ’­æ”¾
- èƒŒæ™¯æ¸å˜ï¼š#f0f0f0 â†’ #e0e0e0 â†’ #f0f0f0
- ä½¿ç”¨CSSåŠ¨ç”»ï¼Œæ€§èƒ½ä¼˜ç§€

### è‡ªå®šä¹‰æ ·å¼

å¯ä»¥é€šè¿‡å…¨å±€æ ·å¼è¦†ç›–éª¨æ¶å±æ ·å¼ï¼š

```css
/* åœ¨é¡µé¢çš„ wxss ä¸­ */
.skeleton {
  background: #f5f5f5 !important;
}

.skeleton-item {
  background: linear-gradient(
    90deg,
    #e8e8e8 25%,
    #d8d8d8 50%,
    #e8e8e8 75%
  ) !important;
}
```

---

## ç»„ä»¶é€šä¿¡

### çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®

```xml
<!-- çˆ¶ç»„ä»¶ -->
<result-card title="{{resultTitle}}" result="{{resultText}}" />
```

### å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®

```xml
<!-- çˆ¶ç»„ä»¶ -->
<result-card bind:copy="handleCopy" />
```

```javascript
// çˆ¶ç»„ä»¶
handleCopy(e) {
  console.log('å¤åˆ¶çš„å†…å®¹:', e.detail.text);
}

// å­ç»„ä»¶
this.triggerEvent('copy', { text: this.properties.result });
```

---

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ result-card æ˜¾ç¤ºè®¡ç®—ç»“æœ

âœ… **æ¨è**:
```xml
<result-card
  title="è®¡ç®—ç»“æœ"
  result="{{resultText}}"
  unit="{{unit}}"
  precision="{{precision}}"
  formula="{{formula}}"
  conditions="{{conditions}}"
  dataSource="{{dataSource}}"
  showMetadata="{{true}}"
/>
```

âŒ **ä¸æ¨è**:
```xml
<view class="result">
  <text>{{resultText}}</text>
</view>
```

### 2. ä½¿ç”¨ skeleton æ”¹å–„åŠ è½½ä½“éªŒ

âœ… **æ¨è**:
```xml
<view wx:if="{{loading}}">
  <skeleton type="card" rows="5" />
</view>
<view wx:else>
  <!-- å†…å®¹ -->
</view>
```

âŒ **ä¸æ¨è**:
```xml
<view wx:if="{{loading}}">
  <text>åŠ è½½ä¸­...</text>
</view>
```

### 3. ä¼ é€’å®Œæ•´çš„å…ƒæ•°æ®

âœ… **æ¨è**:
```javascript
this.setData({
  resultText: `d = ${result.d} Ã…`,
  unit: result.unit,
  precision: result.precision,
  formula: result.formula,
  conditions: result.conditions,
  dataSource: 'CODATA 2018'
});
```

âŒ **ä¸æ¨è**:
```javascript
this.setData({
  resultText: `d = ${result.d} Ã…`
  // ç¼ºå°‘å…ƒæ•°æ®
});
```

---

## æ•…éšœæ’æŸ¥

### result-card ä¸æ˜¾ç¤ºå…ƒæ•°æ®

**åŸå› **: å…ƒæ•°æ®å±æ€§ä¸ºç©ºæˆ–æœªä¼ é€’  
**è§£å†³**: ç¡®ä¿ä¼ é€’äº†è‡³å°‘ä¸€ä¸ªå…ƒæ•°æ®å±æ€§

### skeleton ä¸æ˜¾ç¤ºåŠ¨ç”»

**åŸå› **: å¯èƒ½æ˜¯æ ·å¼å†²çª  
**è§£å†³**: æ£€æŸ¥é¡µé¢æ ·å¼æ˜¯å¦è¦†ç›–äº† skeleton æ ·å¼

### tool-card ç‚¹å‡»æ— ååº”

**åŸå› **: æœªç»‘å®š click äº‹ä»¶æˆ– path ä¸ºç©º  
**è§£å†³**: ç¡®ä¿ä¼ é€’äº† path å±æ€§å¹¶ç»‘å®šäº†äº‹ä»¶

---

## æ›´æ–°æ—¥å¿—

### v2.1.0 (2025-10-10)
- âœ¨ result-card å¢åŠ å…ƒæ•°æ®æ”¯æŒ
- âœ¨ æ–°å¢ skeleton ç»„ä»¶
- ğŸ› ä¿®å¤ result-card çš„ typeof é—®é¢˜

### v2.0.0 (2025-10-01)
- âœ¨ åˆå§‹ç‰ˆæœ¬
- âœ¨ result-card, calculator-input, tool-card

---

**ç»´æŠ¤è€…**: é¡¹ç›®å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-10-10

